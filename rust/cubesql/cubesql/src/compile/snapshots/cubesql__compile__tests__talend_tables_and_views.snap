---
source: cubesql/src/compile/mod.rs
expression: "execute_query(r#\"\n                ( \n                    select\n                        t.schemaname                  as ownerName,\n                        t.tablename                   as tableName,\n                        /*c.oid*/ cast(c.oid as bigint) as objectId, \n                        (select n_live_tup from pg_stat_user_tables s where s.schemaname=t.schemaname and s.relname=t.tablename)  as row_count,\n                        1\t\t\t\t\t\tas tableType\n                    from pg_tables t, pg_class c, pg_namespace n\n                    /*where clause number 1 (table where clause)*/\n                    where t.tablename=c.relname\n                        and   n.oid\t   = c.relnamespace\n                        and   t.schemaname = n.nspname\n                        and t.schemaname <> 'information_schema'\n                        and t.tablename  <> 'attrep_ddl_audit'\n                        and t.tablename  <> 'attrep_heartbeat'\n                        and\n                        (\n                            (( (1=0) ) -- Explicit Inclusion\n                            or \n                            (\n                                ( \n                        t.schemaname LIKE 'public' and t.schemaname not like 'pg\\_%' and t.tablename LIKE '%'\n                        ) -- Patterned Inclusion\n                                and not\n                                ( \n                        t.schemaname LIKE '%' and t.schemaname not like 'pg\\_%' and t.tablename LIKE 'attrep_loopback%'\n                        or \n                        t.schemaname LIKE '%' and t.schemaname not like 'pg\\_%' and t.tablename LIKE 'attrep_changes%'\n                        or \n                        t.schemaname LIKE '%' and t.schemaname not like 'pg\\_%' and t.tablename LIKE 'attrep_apply%'\n                        or \n                        t.schemaname LIKE '%' and t.schemaname not like 'pg\\_%' and t.tablename LIKE 'attrep_truncation%'\n                        or \n                        t.schemaname LIKE '%' and t.schemaname not like 'pg\\_%' and t.tablename LIKE 'attrep_audit_table'\n                        or \n                        t.schemaname LIKE '%' and t.schemaname not like 'pg\\_%' and t.tablename LIKE 'attrep_status'\n                        or \n                        t.schemaname LIKE '%' and t.schemaname not like 'pg\\_%' and t.tablename LIKE 'attrep_suspended_tables'\n                        or \n                        t.schemaname LIKE '%' and t.schemaname not like 'pg\\_%' and t.tablename LIKE 'attrep_history'\n                        or \n                        t.schemaname LIKE '%' and t.schemaname not like 'pg\\_%' and t.tablename LIKE 'attrep_cdc_%'\n                        ) -- Patterned exclusion\n                            ))\n                            and \n                            (1=1) \n                        )\n\n                    UNION\n\n                    select\n                        v.schemaname                  as ownerName,\n                        v.viewname                   as tableName,\n                        /*c.oid*/ cast(c.oid as bigint) as objectId, \n                        0  as row_count,/**/ \n                        2\t\t\t\t\t\tas tableType\n                    from pg_views v, pg_class c, pg_namespace n\n                    /*where clause number 2 (view where clause)*/ \n                    where v.viewname = c.relname\n                        and   n.oid\t    = c.relnamespace\n                        and   v.schemaname = n.nspname\n                        and v.schemaname <> 'information_schema'\n                        and v.viewname  <> 'attrep_ddl_audit'\n                        and v.viewname  <> 'attrep_heartbeat'\n                        and\n                        (\n                            (( (1=0) ) -- Explicit Inclusion\n                            or \n                            (\n                                ( (1=0) ) -- Patterned Inclusion\n                                and not\n                                ( (1=0) ) -- Patterned exclusion\n                            ))\n                            and \n                            (1=1) \n                        )\n                )\n                order by 1,2\n                \"#.to_string(),\nDatabaseProtocol::PostgreSQL).await?"
---
+-----------+---------------------------+----------+-----------+-----------+
| ownerName | tableName                 | objectId | row_count | tableType |
+-----------+---------------------------+----------+-----------+-----------+
| public    | KibanaSampleDataEcommerce | 18000    | 0         | 1         |
| public    | Logs                      | 18020    | 0         | 1         |
| public    | MultiTypeCube             | 18246    | 0         | 1         |
| public    | NumberCube                | 18030    | 0         | 1         |
| public    | WideCube                  | 18036    | 0         | 1         |
+-----------+---------------------------+----------+-----------+-----------+
